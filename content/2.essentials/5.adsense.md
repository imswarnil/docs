---
title: Google AdSense & Ad Wrapper
description: Embed responsive / fixed AdSense units with a single component, dashed rounded wrapper, and Nuxt Content (MDC) usage.
navigation:
icon: i-lucide-megaphone
------------------------

## Files

### `components/GoogleAd.vue`

```vue
<script setup lang="ts">
import { onMounted, watch, ref, nextTick } from 'vue'
import { useRoute } from 'vue-router'

type Variant =
  | 'horizontal'
  | 'vertical'
  | 'square'
  | 'square-fixed'
  | 'leaderboard'
  | 'skyscraper'
  | 'in-article'
  | 'in-feed'
  | 'multiplex'
  | 'fixed'

const props = withDefaults(defineProps<{
  variant?: Variant
  adClient?: string
  adSlot?: string
  adLayout?: string
  adLayoutKey?: string
  adTest?: 'on' | 'off'
  width?: string
  height?: string
  maxW?: string
  maxH?: string
  minH?: string
  refreshKey?: string | number
  dataClass?: string
}>(), {
  variant: 'horizontal',
  adClient: 'ca-pub-1291242080282540'
})

// Default slots from your message (can be overridden via prop)
const DEFAULT_SLOTS: Record<Variant, { slot?: string; layout?: string; layoutKey?: string }> = {
  horizontal:   { slot: '8939839370' }, // responsive horizontal
  leaderboard:  { slot: '8939839370' }, // 728x90 / responsive
  vertical:     { slot: '3487917390' }, // responsive vertical
  skyscraper:   { slot: '3487917390' }, // 300x600 / responsive
  square:       { slot: '7663977887' }, // responsive square
  'square-fixed': { slot: '7663977887' }, // force a 250x250 box
  'in-article': { slot: '6501428979', layout: 'in-article' },
  'in-feed':    { slot: '9130894804', layoutKey: '-6v+f0-19-44+c6' },
  multiplex:    { slot: '6808134701' }, // autorelaxed
  fixed:        { slot: '3375031396' }  // use for explicit width/height
}

const route = useRoute()
const mountRef = ref<HTMLElement | null>(null)

function ensureScript () {
  if (typeof window === 'undefined') return
  // @ts-ignore
  if (window.adsbygoogle) return
  if (!document.getElementById('adsbygoogle-js')) {
    const s = document.createElement('script')
    s.id = 'adsbygoogle-js'
    s.src = `https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${props.adClient}`
    s.crossOrigin = 'anonymous'
    s.async = false // deterministic load
    document.head.appendChild(s)
  }
  // @ts-ignore
  window.adsbygoogle = window.adsbygoogle || []
}

function insStyle (): string {
  if (props.variant === 'fixed') {
    const w = props.width || '320px'
    const h = props.height || '100px'
    return `display:inline-block;width:${w};height:${h}`
  }
  if (props.variant === 'square-fixed') {
    return 'display:inline-block;width:250px;height:250px'
  }
  return 'display:block'
}

function setVariantAttrs (ins: HTMLElement) {
  if (props.variant === 'in-article') {
    ins.setAttribute('data-ad-format', 'fluid')
    ins.setAttribute('data-ad-layout', props.adLayout || DEFAULT_SLOTS['in-article'].layout!)
  } else if (props.variant === 'in-feed') {
    ins.setAttribute('data-ad-format', 'fluid')
    ins.setAttribute('data-ad-layout-key', props.adLayoutKey || DEFAULT_SLOTS['in-feed'].layoutKey!)
  } else if (props.variant === 'multiplex') {
    ins.setAttribute('data-ad-format', 'autorelaxed')
  } else if (props.variant === 'fixed' || props.variant === 'square-fixed') {
    // rely on fixed width/height in style
  } else {
    ins.setAttribute('data-ad-format', 'auto')
    ins.setAttribute('data-full-width-responsive', 'true')
  }
}

async function renderAd () {
  const host = mountRef.value
  if (!host) return
  host.innerHTML = ''

  const ins = document.createElement('ins')
  ins.className = 'adsbygoogle'
  ins.setAttribute('style', insStyle())

  // Core attrs
  ins.setAttribute('data-ad-client', props.adClient)
  const fallbackSlot = DEFAULT_SLOTS[props.variant].slot
  if (props.adSlot || fallbackSlot) {
    ins.setAttribute('data-ad-slot', props.adSlot || fallbackSlot!)
  }
  if (props.adTest) ins.setAttribute('data-adtest', props.adTest)

  setVariantAttrs(ins)
  host.appendChild(ins)

  // queue fill
  // @ts-ignore
  const q = (window.adsbygoogle = window.adsbygoogle || [])
  try { q.push({}) } catch {}
}

onMounted(async () => {
  ensureScript()
  await nextTick()
  renderAd()
})

watch(() => [route.fullPath, props.refreshKey, props.variant, props.adSlot, props.width, props.height], async () => {
  await nextTick()
  renderAd()
})
</script>

<template>
  <div
    class="adbox"
    :class="['adbox--' + variant, dataClass]"
    :style="{
      '--ad-max-w': maxW || '100%',
      '--ad-max-h': maxH || 'none',
      '--ad-min-h': minH || '0px'
    }"
  >
    <div class="adbox__frame">
      <div ref="mountRef" class="adbox__mount" />
    </div>
  </div>
</template>
```

### `assets/css/main.css` (add these styles)

```css
/* Ad wrapper: dashed, rounded, responsive, never overflows parent */
.adbox { width:100%; max-width:var(--ad-max-w, 100%); max-height:var(--ad-max-h, none); overflow:hidden; margin:1rem 0; box-sizing:border-box }
.adbox__frame { border:1px dashed var(--ui-border, rgba(0,0,0,.12)); border-radius:12px; background:var(--ui-elevated, #fff); padding:8px; overflow:hidden; width:100%; min-height:var(--ad-min-h, 0); box-sizing:border-box }
.adbox__mount { width:100%; height:auto; overflow:hidden }

/* Variant nudges */
.adbox--horizontal .adbox__frame, .adbox--leaderboard .adbox__frame { max-width:728px; margin-inline:auto; min-height:90px }
.adbox--vertical .adbox__frame, .adbox--skyscraper .adbox__frame { max-width:320px; margin-inline:auto; min-height:280px }
.adbox--square .adbox__frame { max-width:250px; margin-inline:auto; padding:0 }
.adbox--square-fixed .adbox__frame { max-width:250px; margin-inline:auto; padding:0 }
.adbox--in-article .adbox__frame, .adbox--in-feed .adbox__frame, .adbox--multiplex .adbox__frame { max-width:100% }
.adbox--fixed .adbox__frame { padding:0; margin-inline:auto; }

@media (max-width:640px) {
  .adbox { margin:.75rem 0 }
  .adbox__frame { padding:6px }
  .adbox--leaderboard .adbox__frame, .adbox--horizontal .adbox__frame { max-width:100%; min-height:70px }
  .adbox--square .adbox__frame, .adbox--square-fixed .adbox__frame { max-width:220px }
}
```

### (Optional) `plugins/adsense.client.ts`

```ts
export default defineNuxtPlugin(() => {
  if (process.server) return
  if (document.getElementById('adsbygoogle-js')) return

  const s = document.createElement('script')
  s.id = 'adsbygoogle-js'
  s.crossOrigin = 'anonymous'
  s.async = false
  s.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1291242080282540'
  document.head.appendChild(s)
})
```

---

## Usage

### Basic (Vue)

```vue
<template>
  <ClientOnly>
    <GoogleAd variant="leaderboard" />
  </ClientOnly>
</template>
```

### Docs layout header/footer (6–9 ads example)

```vue
<!-- Header -->
<ClientOnly><GoogleAd variant="leaderboard" /></ClientOnly>

<!-- Under hero -->
<ClientOnly><GoogleAd variant="horizontal" /></ClientOnly>

<!-- In-article before content -->
<ClientOnly><GoogleAd variant="in-article" /></ClientOnly>

<!-- Right rail (TOC bottom) -->
<ClientOnly><GoogleAd variant="square" maxW="250px" /></ClientOnly>
<ClientOnly><GoogleAd variant="vertical" maxW="300px" /></ClientOnly>

<!-- Between sections -->
<ClientOnly><GoogleAd variant="in-article" /></ClientOnly>

<!-- Bottom content -->
<ClientOnly><GoogleAd variant="multiplex" /></ClientOnly>

<!-- Footer -->
<ClientOnly><GoogleAd variant="horizontal" /></ClientOnly>
```

### Nuxt Content (MDC)

```mdc
::GoogleAd
---
variant: in-article
---
::

Some content…

::GoogleAd
---
variant: square
maxW: 250px
---
::
```

### Strict fixed sizes

```vue
<!-- 336x280 large rectangle -->
<ClientOnly>
  <GoogleAd variant="fixed" width="336px" height="280px" />
</ClientOnly>

<!-- 250x250 square -->
<ClientOnly>
  <GoogleAd variant="square-fixed" />
</ClientOnly>
```

---

## Tips & Troubleshooting

* Use `<ClientOnly>` (SSR cannot render ads).
* To **force re-fill** on navigation, bind `:refreshKey="$route.fullPath"`.
* For **test fills**, set `adTest="on"`.
* Keep only **one** AdSense script loader (either the plugin above or `useHead()` in a layout).
* Ensure your domain is authorized in AdSense and ad blockers are disabled during testing.
* **Square**: Prefer `square-fixed` for a guaranteed 250×250. `square` is responsive but the wrapper clamps to ~250px.
